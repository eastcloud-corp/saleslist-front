(()=>{var e={};e.id=345,e.ids=[345],e.modules={22:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1158:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2060:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>B});var a=t(687),n=t(3210),i=t(8508),r=t(2571),l=t(4934),c=t(5192),d=t(5910),o=t(9821),x=t(3193),h=t(638),m=t(214),p=t(8988),j=t(6752),u=t(9270),v=t(6474),y=t(22),g=t(1158),f=t(6023);let N=(0,t(2688).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var _=t(8233),b=t(1702),w=t(9266),A=t(7163),k=t(8848),S=t(9390),C=t(7826),$=t(1862),E=t(7313),P=t(5362);function G({open:e,onOpenChange:s,onAddToNGList:t,clientId:i}){let[r,d]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[m,y]=(0,n.useState)(null),[g,f]=(0,n.useState)(!1),{toast:N}=(0,b.dj)(),{companies:_,isLoading:w}=(0,P.R)({search:r,limit:20}),A=e=>{y(e),h("")},k=async()=>{if(!m){N({title:"エラー",description:"企業を選択してください",variant:"destructive"});return}f(!0);try{let e=x.trim();await t(m,e||void 0),N({title:"追加完了",description:`${m.name}をNGリストに追加しました`}),y(null),h(""),d(""),s(!1)}catch(e){N({title:"エラー",description:"NGリストへの追加に失敗しました",variant:"destructive"})}finally{f(!1)}},G=()=>{y(null),h(""),d(""),s(!1)};return(0,a.jsx)(C.lG,{open:e,onOpenChange:G,children:(0,a.jsxs)(C.Cf,{className:"max-w-4xl max-h-[80vh] flex flex-col overflow-y-auto",children:[(0,a.jsx)(C.c7,{children:(0,a.jsxs)(C.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),"企業検索からNG企業追加"]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-1",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"search",children:"企業名で検索"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(p.p,{id:"search",placeholder:"企業名を入力してください...",value:r,onChange:e=>d(e.target.value),className:"pl-10"})]})]}),(0,a.jsxs)(c.Zp,{className:"flex-1 overflow-hidden",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"text-lg",children:["検索結果 (",_.length,"件)"]})}),(0,a.jsx)(c.Wu,{className:"overflow-auto max-h-[320px]",children:w?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)($.A,{className:"h-6 w-6 animate-spin mr-2"}),"検索中..."]}):0===_.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:r?"該当する企業が見つかりません":"企業情報が登録されていません"}):(0,a.jsxs)(j.XI,{children:[(0,a.jsx)(j.A0,{children:(0,a.jsxs)(j.Hj,{children:[(0,a.jsx)(j.nd,{className:"w-12",children:"選択"}),(0,a.jsx)(j.nd,{children:"企業名"}),(0,a.jsx)(j.nd,{children:"業界"}),(0,a.jsx)(j.nd,{children:"所在地"}),(0,a.jsx)(j.nd,{children:"従業員数"})]})}),(0,a.jsx)(j.BF,{children:_.map(e=>(0,a.jsxs)(j.Hj,{className:m?.id===e.id?"bg-blue-50":"cursor-pointer hover:bg-gray-50",onClick:()=>A(e),children:[(0,a.jsx)(j.nA,{children:(0,a.jsx)("div",{className:"flex justify-center",children:m?.id===e.id&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})}),(0,a.jsx)(j.nA,{className:"font-medium",children:e.name}),(0,a.jsx)(j.nA,{children:e.industry}),(0,a.jsx)(j.nA,{children:e.prefecture}),(0,a.jsx)(j.nA,{children:e.employee_count?`${e.employee_count}名`:"-"})]},e.id))})]})})]}),m&&(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-lg",children:"選択された企業"})}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:m.name}),(0,a.jsx)(o.E,{variant:"outline",children:m.industry}),(0,a.jsx)(o.E,{variant:"outline",children:m.prefecture})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S.J,{htmlFor:"ng-reason",children:"NG理由（任意）"}),(0,a.jsx)(p.p,{id:"ng-reason",placeholder:"例: 競合他社、既存取引先、対象外業界など",value:x,onChange:e=>h(e.target.value),maxLength:100}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[x.length,"/100文字"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:G,disabled:g,children:"キャンセル"}),(0,a.jsxs)(l.$,{onClick:k,disabled:!m||g,children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),g?"追加中...":"NGリストに追加"]})]})]})})}function M({clientId:e}){let[s,t]=(0,n.useState)(!1),[i,r]=(0,n.useState)(!1),{ngList:d,stats:m,isLoading:S,error:C,importCSV:$,deleteNG:E,addCompanyToNG:P}=function(e){let[s,t]=(0,n.useState)([]),[a,i]=(0,n.useState)({count:0,matched_count:0,unmatched_count:0}),[r,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),o=async()=>{if(!k.authService.isAuthenticated()){l(!1);return}l(!0),d(null);try{let s=await w.uE.get(`/clients/${e}/ng-companies`);t(s.results||[]),i({count:s.count||0,matched_count:s.matched_count||0,unmatched_count:s.unmatched_count||0})}catch(e){d("NGリストの取得に失敗しました"),t([]),i({count:0,matched_count:0,unmatched_count:0})}finally{l(!1)}};return{ngList:s,stats:a,isLoading:r,error:c,importCSV:async s=>{try{let t=await w.uE.uploadFile(A.i3.ENDPOINTS.NG_COMPANY_IMPORT(e.toString()),s);return await o(),t}catch(e){throw Error("CSVインポートに失敗しました")}},deleteNG:async s=>{try{await w.uE.delete(`/clients/${e}/ng-companies/${s}`),await o()}catch(e){throw Error("NG企業の削除に失敗しました")}},addCompanyToNG:async(s,t,a)=>{try{await w.uE.post(`/clients/${e}/ng-companies/add/`,{company_id:s,company_name:t,reason:a??""}),await o()}catch(e){throw Error("NG企業の追加に失敗しました")}},refetch:o}}(e),{toast:M}=(0,b.dj)(),R=async e=>{let s=e.target.files?.[0];if(s){if(!s.name.endsWith(".csv")){M({title:"エラー",description:"CSVファイルを選択してください",variant:"destructive"});return}t(!0);try{let e=await $(s);M({title:"インポート完了",description:`${e.imported_count}件のNGリストを登録しました（マッチ: ${e.matched_count}件）`}),e.errors.length>0&&M({title:"一部エラーがありました",description:`${e.errors.length}件のエラーがありました`,variant:"destructive"})}catch(e){M({title:"エラー",description:"インポートに失敗しました",variant:"destructive"})}finally{t(!1),e.target.value=""}}},Z=async e=>{if(confirm("このNG企業を削除しますか？"))try{await E(e),M({title:"削除完了",description:"NG企業を削除しました"})}catch(e){M({title:"エラー",description:"削除に失敗しました",variant:"destructive"})}},z=async(e,s)=>{await P(e.id,e.name,s)};return S?(0,a.jsx)(x.k,{}):C?(0,a.jsx)(h.$,{message:C}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5"}),"企業検索からNG企業追加"]})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"企業管理データから企業を検索してNGリストに追加できます"}),(0,a.jsxs)(l.$,{onClick:()=>r(!0),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"企業検索"]})]})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"h-5 w-5"}),"登録済みNGリスト (",m.count,"件)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(o.E,{variant:"default",children:["マッチ済: ",m.matched_count]}),(0,a.jsxs)(o.E,{variant:"secondary",children:["未マッチ: ",m.unmatched_count]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:()=>{let e=new Blob(["企業名,理由\n株式会社サンプル,競合他社\n○○商事,既存取引先\n"],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="ng_list_template.csv",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},disabled:s,size:"sm",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"CSVテンプレート"]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.p,{type:"file",accept:".csv",onChange:R,disabled:s,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"csv-import"}),(0,a.jsx)(l.$,{variant:"default",disabled:s,size:"sm",asChild:!0,children:(0,a.jsx)("label",{htmlFor:"csv-import",className:"cursor-pointer",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.k,{size:"sm",className:"mr-2"}),"インポート中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"CSVインポート"]})})})]})]})]})}),(0,a.jsx)(c.Wu,{children:0===d.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(N,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"NGリストが登録されていません"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"企業検索またはCSVインポートでNGリストを登録してください"})]}):(0,a.jsxs)(j.XI,{children:[(0,a.jsx)(j.A0,{children:(0,a.jsxs)(j.Hj,{children:[(0,a.jsx)(j.nd,{children:"企業名"}),(0,a.jsx)(j.nd,{children:"マッチ状態"}),(0,a.jsx)(j.nd,{children:"理由"}),(0,a.jsx)(j.nd,{children:"登録日"}),(0,a.jsx)(j.nd,{className:"w-20",children:"操作"})]})}),(0,a.jsx)(j.BF,{children:d.map(e=>(0,a.jsxs)(j.Hj,{children:[(0,a.jsx)(j.nA,{className:"font-medium",children:e.company_name}),(0,a.jsx)(j.nA,{children:e.matched?(0,a.jsx)(o.E,{variant:"default",children:"マッチ済"}):(0,a.jsx)(o.E,{variant:"outline",children:"未マッチ"})}),(0,a.jsx)(j.nA,{children:e.reason||"-"}),(0,a.jsx)(j.nA,{children:new Date(e.created_at).toLocaleDateString("ja-JP")}),(0,a.jsx)(j.nA,{children:(0,a.jsx)(l.$,{size:"sm",variant:"ghost",onClick:()=>Z(e.id),className:"h-8 w-8 p-0","aria-label":`${e.company_name}をNGリストから削除`,children:(0,a.jsx)(_.A,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,a.jsx)(G,{open:i,onOpenChange:r,onAddToNGList:z,clientId:e})]})}var R=t(8559),Z=t(1312),z=t(3143),J=t(9891),L=t(8179),O=t(3411),q=t(5814),F=t.n(q),T=t(5616);function B({params:e}){let s=Number.parseInt((0,n.use)(e).id);return(0,a.jsx)(H,{id:s})}function H({id:e}){let[s,t]=(0,n.useState)(!1),[j,u]=(0,n.useState)(!1),[v,y]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[N,_]=(0,n.useState)(""),{client:b,loading:k,error:$}=(0,i.tH)(e),{stats:P,loading:G}=(0,i.Kz)(e),{projects:q,loading:B,refetch:H}=(0,i.B)(e),{updateClient:I}=(0,i.aq)(),D=async()=>{if(v.trim()){u(!0);try{let e={name:v,description:g,manager_name:N,status:"planning",client_company:b?.name||"",client_id:b?.id||null};await w.uE.post(A.i3.ENDPOINTS.PROJECTS,e),await H(),y(""),f(""),_("")}catch(e){}finally{u(!1)}}};return k?(0,a.jsx)(r.MainLayout,{children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(x.k,{})})}):$||!b?(0,a.jsx)(r.MainLayout,{children:(0,a.jsx)(h.$,{message:$||"クライアントが見つかりません"})}):(0,a.jsx)(r.MainLayout,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(F(),{href:"/clients",children:(0,a.jsxs)(l.$,{variant:"ghost",size:"sm",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"クライアント一覧へ"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:b.name}),(0,a.jsx)("p",{className:"text-gray-600",children:b.industry})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.E,{variant:b.is_active?"default":"secondary",children:b.is_active?"アクティブ":"非アクティブ"}),(0,a.jsx)(F(),{href:`/clients/${e}/select-companies`,children:(0,a.jsxs)(l.$,{variant:"outline",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"営業対象企業を選択"]})}),(0,a.jsxs)(l.$,{onClick:()=>t(!s),variant:s?"secondary":"default",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),s?"編集終了":"編集"]})]})]}),s?(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c.ZB,{children:"クライアント情報編集"}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>t(!1),children:"キャンセル"})]})}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)(m.M,{client:b,onSubmit:async s=>{await I(e,s),t(!1)}})})]}):(0,a.jsxs)(d.tU,{defaultValue:"basic-info",className:"space-y-6",children:[(0,a.jsxs)(d.j7,{children:[(0,a.jsxs)(d.Xi,{value:"basic-info",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"基本情報"]}),(0,a.jsxs)(d.Xi,{value:"ng-list",children:[(0,a.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"NGリスト"]}),(0,a.jsxs)(d.Xi,{value:"projects",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"案件一覧"]}),(0,a.jsxs)(d.Xi,{value:"stats",children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"統計情報"]})]}),(0,a.jsx)(d.av,{value:"basic-info",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"基本情報"})}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-sm font-medium text-gray-700",children:"担当者名"}),(0,a.jsx)("p",{className:"text-gray-900",children:b.contact_person||"未設定"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-sm font-medium text-gray-700",children:"メールアドレス"}),(0,a.jsx)("p",{className:"text-gray-900",children:b.email||"未設定"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-sm font-medium text-gray-700",children:"電話番号"}),(0,a.jsx)("p",{className:"text-gray-900",children:b.phone||"未設定"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-sm font-medium text-gray-700",children:"業界"}),(0,a.jsx)("p",{className:"text-gray-900",children:b.industry||"未設定"})]})]}),b.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{className:"text-sm font-medium text-gray-700",children:"備考"}),(0,a.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.notes})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)(F(),{href:`/clients/${e}/select-companies`,children:(0,a.jsxs)(l.$,{className:"w-full",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"営業対象企業を選択して案件を作成"]})})})]})]})}),(0,a.jsx)(d.av,{value:"ng-list",children:(0,a.jsx)(M,{clientId:e})}),(0,a.jsx)(d.av,{value:"projects",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(c.ZB,{children:"案件一覧"}),(0,a.jsxs)(C.lG,{children:[(0,a.jsx)(C.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{size:"sm",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"新規案件作成"]})}),(0,a.jsxs)(C.Cf,{children:[(0,a.jsx)(C.c7,{children:(0,a.jsx)(C.L3,{children:"新規案件作成"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{htmlFor:"project-name",children:"案件名"}),(0,a.jsx)(p.p,{id:"project-name",placeholder:"案件名を入力",value:v,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{htmlFor:"project-description",children:"概要"}),(0,a.jsx)(T.T,{id:"project-description",placeholder:"案件の概要を入力",value:g,onChange:e=>f(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{htmlFor:"assigned-user",children:"担当者"}),(0,a.jsx)(p.p,{id:"assigned-user",placeholder:"担当者名を入力",value:N,onChange:e=>_(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(l.$,{variant:"outline",children:"キャンセル"}),(0,a.jsx)(l.$,{onClick:D,disabled:j,children:j?"作成中...":"作成"})]})]})]})]})]})}),(0,a.jsx)(c.Wu,{children:B?(0,a.jsx)(x.k,{}):q.length>0?(0,a.jsx)("div",{className:"space-y-4",children:q.map(s=>(0,a.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)(F(),{href:`/projects/${s.id}`,className:"block",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-600 hover:text-blue-800",children:s.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["企業数: ",s.company_count||0,"社 | 作成日:"," ",new Date(s.created_at).toLocaleDateString()]}),s.description&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.E,{variant:"in_progress"===s.status?"default":"secondary",children:"in_progress"===s.status?"進行中":"completed"===s.status?"完了":"planning"===s.status?"計画中":"中止"}),(0,a.jsx)(F(),{href:`/clients/${e}/select-companies?project=${s.id}`,children:(0,a.jsxs)(l.$,{size:"sm",variant:"outline",children:[(0,a.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"企業追加"]})})]})]})},s.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"関連案件がありません"}),(0,a.jsxs)(C.lG,{children:[(0,a.jsx)(C.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"最初の案件を作成"]})}),(0,a.jsxs)(C.Cf,{children:[(0,a.jsx)(C.c7,{children:(0,a.jsx)(C.L3,{children:"新規案件作成"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{htmlFor:"project-name",children:"案件名"}),(0,a.jsx)(p.p,{id:"project-name",placeholder:"案件名を入力",value:v,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{htmlFor:"project-description",children:"概要"}),(0,a.jsx)(T.T,{id:"project-description",placeholder:"案件の概要を入力",value:g,onChange:e=>f(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.J,{htmlFor:"assigned-user",children:"担当者"}),(0,a.jsx)(p.p,{id:"assigned-user",placeholder:"担当者名を入力",value:N,onChange:e=>_(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(l.$,{variant:"outline",children:"キャンセル"}),(0,a.jsx)(l.$,{onClick:D,disabled:j,children:j?"作成中...":"作成"})]})]})]})]})]})})]})}),(0,a.jsx)(d.av,{value:"stats",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:G?(0,a.jsx)(x.k,{}):P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-sm",children:"総案件数"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:P.project_count||0}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["進行中: ",P.active_project_count||0,"件"]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-sm",children:"総企業数"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:P.total_companies||0}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["コンタクト済: ",P.total_contacted||0,"社"]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-sm",children:"成約率"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[P.success_rate||0,"%"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["完了案件: ",P.completed_project_count||0,"件"]})]})]})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"統計情報を取得できませんでした"})})})]})]})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3143:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4500:(e,s,t)=>{Promise.resolve().then(t.bind(t,2060))},5362:(e,s,t)=>{"use strict";t.d(s,{R:()=>l});var a=t(3210),n=t(9266),i=t(8848),r=t(7163);function l(e={},s=1,t=100){let[c,d]=(0,a.useState)([]),[o,x]=(0,a.useState)({page:1,limit:100,total:0,total_pages:0}),[h,m]=(0,a.useState)(!0),[p,j]=(0,a.useState)(null),u=async()=>{if(!i.authService.isAuthenticated()){m(!1);return}m(!0),j(null);try{let a=[],i=s,l=!0;for(;l&&a.length<100;){let c=new URLSearchParams({page:i.toString(),page_size:t.toString()});e.search&&c.append("search",e.search),e.industry&&c.append("industry",e.industry),e.employee_min&&c.append("employee_min",e.employee_min.toString()),e.employee_max&&c.append("employee_max",e.employee_max.toString()),e.revenue_min&&c.append("revenue_min",e.revenue_min.toString()),e.revenue_max&&c.append("revenue_max",e.revenue_max.toString()),e.prefecture&&c.append("prefecture",e.prefecture),e.established_year_min&&c.append("established_year_min",e.established_year_min.toString()),e.established_year_max&&c.append("established_year_max",e.established_year_max.toString()),void 0!==e.has_facebook&&c.append("has_facebook",e.has_facebook.toString()),void 0!==e.exclude_ng&&c.append("exclude_ng",e.exclude_ng.toString()),e.project_id&&c.append("project_id",e.project_id.toString());let d=await n.uE.get(`${r.i3.ENDPOINTS.COMPANIES}?${c.toString()}`);if(d&&d.results&&Array.isArray(d.results)){let e=d.results,n=new Set(a.map(e=>e.id)),r=e.filter(e=>!n.has(e.id));if(a=[...a,...r],l=!!d.next&&d.results.length>0,++i===s+1){let e=Math.ceil(d.count/t);x({page:s,limit:t,total:d.count,total_pages:e})}}else l=!1;if(i>s+10)break}d(a)}catch(e){j(e instanceof Error?e.message:"企業データの取得に失敗しました"),d([]),x({page:1,limit:100,total:0,total_pages:0})}finally{m(!1)}};return(0,a.useEffect)(()=>{u()},[JSON.stringify(e),s,t]),{companies:c,pagination:o,isLoading:h,error:p,refetch:u,bulkAddCompaniesToProjects:(e,s)=>n.uE.post(r.i3.ENDPOINTS.COMPANY_BULK_ADD_TO_PROJECTS,{company_ids:e,project_ids:s})}}},6023:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},6474:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6884:(e,s,t)=>{Promise.resolve().then(t.bind(t,9022))},8233:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9022:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/clients/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/clients/[id]/page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9270:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9450:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=t(5239),n=t(8088),i=t(8170),r=t.n(i),l=t(893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["clients",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9022)),"/app/app/clients/[id]/page.tsx"]}]},{}]},{loading:[()=>Promise.resolve().then(t.bind(t,9979)),"/app/app/clients/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,8014)),"/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/app/app/clients/[id]/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/clients/[id]/page",pathname:"/clients/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9891:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2688).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[188,525,133,208,146,759,628,385,976,312,279],()=>t(9450));module.exports=a})();