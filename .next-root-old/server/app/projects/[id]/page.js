(()=>{var e={};e.id=801,e.ids=[801],e.modules={228:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},532:(e,t,s)=>{"use strict";s.d(t,{MainLayout:()=>a});var r=s(2907);let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call MainLayout() from the server but MainLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/components/layout/main-layout.tsx","MainLayout");(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/components/layout/main-layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/components/layout/main-layout.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2094:(e,t,s)=>{"use strict";s.d(t,{ProjectDetailClient:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call ProjectDetailClient() from the server but ProjectDetailClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/projects/[id]/project-detail-client.tsx","ProjectDetailClient")},2565:(e,t,s)=>{Promise.resolve().then(s.bind(s,2094)),Promise.resolve().then(s.bind(s,532))},2695:(e,t,s)=>{"use strict";s.d(t,{ProjectDetailClient:()=>M});var r=s(687),a=s(3210),n=s(6189),i=s(5814),l=s.n(i),d=s(9616),c=s(4934),o=s(9821),m=s(8302),x=s(5192),h=s(6752),p=s(3974),u=s(7313),j=s(6474),v=s(2953),f=s(228),g=s(1702),y=s(4604);function N({companies:e,onUpdateStatus:t,onRemoveCompany:s,onToggleActive:n,onAddCompany:i,projectId:d,isLoading:o=!1}){let{toast:N}=(0,g.dj)(),{statuses:b}=(0,y.o)(),[A,w]=(0,a.useState)(null),[_,k]=(0,a.useState)(""),[C,P]=(0,a.useState)("");b.length>0&&b.map(e=>({value:e.name,label:e.name,variant:"NG"===e.name?"destructive":"default"}));let M=async(e,t)=>{try{await n(e.company_id?.toString()||e.id.toString(),t),N({title:"成功",description:`企業を${t?"有効化":"無効化"}しました`})}catch(e){N({title:"エラー",description:`企業の${t?"有効化":"無効化"}に失敗しました`,variant:"destructive"})}},D=e=>e?new Date(e).toLocaleDateString("ja-JP"):"未設定";return(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"h-5 w-5"}),"Project Companies (",e.length,")"]}),(0,r.jsxs)(c.$,{onClick:i,size:"sm",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"企業を追加"]})]})}),(0,r.jsx)(x.Wu,{children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,r.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,r.jsx)("p",{children:"この案件にはまだ企業が追加されていません"}),(0,r.jsx)("p",{className:"text-sm",children:"企業を追加して営業進捗の管理を開始してください"})]}):(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(h.XI,{children:[(0,r.jsx)(h.A0,{children:(0,r.jsxs)(h.Hj,{children:[(0,r.jsx)(h.nd,{children:"企業名"}),(0,r.jsx)(h.nd,{children:"業界"}),(0,r.jsx)(h.nd,{children:"ステータス"}),(0,r.jsx)(h.nd,{children:"最終接触"}),(0,r.jsx)(h.nd,{children:"アクティブ"}),(0,r.jsx)(h.nd,{className:"w-[120px]",children:"操作"})]})}),(0,r.jsx)(h.BF,{children:e.map(e=>{let s=!1!==e.is_active;return(0,r.jsxs)(h.Hj,{className:s?"":"opacity-60 bg-gray-50",children:[(0,r.jsx)(h.nA,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.company_name||e.company?.name||"企業名不明"}),e.company?.website&&(0,r.jsxs)("a",{href:e.company.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-muted-foreground hover:text-primary flex items-center gap-1 mt-1",children:[e.company?.website?.replace(/^https?:\/\//,"")||"",(0,r.jsx)(v.A,{className:"h-3 w-3"})]})]})}),(0,r.jsx)(h.nA,{children:e.company_industry||e.company?.industry||"-"}),(0,r.jsx)(h.nA,{children:(0,r.jsxs)(p.l6,{value:e.status,onValueChange:s=>t(e.company?.id?.toString()||"",s),children:[(0,r.jsx)(p.bq,{className:"w-40",children:(0,r.jsx)(p.yv,{})}),(0,r.jsx)(p.gC,{children:[{value:"未接触",label:"未接触"},{value:"DM送信予定",label:"DM送信予定"},{value:"DM送信済み",label:"DM送信済み"},{value:"返信あり",label:"返信あり"},{value:"アポ獲得",label:"アポ獲得"},{value:"成約",label:"成約"},{value:"NG",label:"NG"}].map(e=>(0,r.jsx)(p.eb,{value:e.value,children:e.label},e.value))})]})}),(0,r.jsx)(h.nA,{children:(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),D(e.contact_date)]})}),(0,r.jsx)(h.nA,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m.d,{checked:s,onCheckedChange:t=>M(e,t),disabled:o}),(0,r.jsx)("span",{className:"text-sm",children:s?"有効":"無効"})]})}),(0,r.jsx)(h.nA,{children:(0,r.jsx)(c.$,{asChild:!0,variant:"outline",size:"sm",children:(0,r.jsx)(l(),{href:`/projects/${d}/companies/${e.company_id||e.company?.id}`,children:"営業詳細"})})})]},e.id)})})]})})})]})}var b=s(4029),A=s(3018),w=s(1862),_=s(8559),k=s(8179),C=s(3143),P=s(8233);function M({projectId:e}){var t;let[s,i]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),p=(0,n.useRouter)(),{project:u,isLoading:j,error:v,updateProject:g,updateCompanyStatus:y,removeCompany:M}=(0,b.B)(e),D=async e=>{try{await g(e),i(!1)}catch(e){}},q=async()=>{if(confirm("この案件を削除してもよろしいですか？（ステータスが'削除済み'に変更されます）")){h(!0);try{await g({status:"削除済み"}),p.push("/projects")}catch(e){h(!1)}}},S=async(e,t,s)=>{try{await y(Number(e),{status:t,notes:s})}catch(e){throw e}},$=async(e,t)=>{try{await y(Number(e),{is_active:t})}catch(e){throw e}},E=e=>e?new Date(e).toLocaleDateString("ja-JP"):"未設定";return j?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(w.A,{className:"h-6 w-6 animate-spin"}),(0,r.jsx)("span",{children:"案件情報を読み込み中..."})]})}):v||!u?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(c.$,{variant:"outline",asChild:!0,children:(0,r.jsxs)(l(),{href:"/projects",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"案件一覧に戻る"]})})}),(0,r.jsx)(A.Fc,{variant:"destructive",children:(0,r.jsx)(A.TN,{children:v||"案件が見つかりません"})})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(c.$,{variant:"outline",asChild:!0,children:(0,r.jsxs)(l(),{href:"/projects",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"案件一覧に戻る"]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,r.jsx)(k.A,{className:"h-8 w-8"}),u.name]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"案件の詳細情報と企業管理"})]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:!s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{variant:"outline",onClick:()=>i(!0),children:[(0,r.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"編集"]}),(0,r.jsxs)(c.$,{variant:"destructive",onClick:q,disabled:m,children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-2"}),m?"削除中...":"削除"]})]})})]}),s?(0,r.jsx)(d.o,{project:u,onSave:D,onCancel:()=>i(!1)}):(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(x.ZB,{children:"案件情報"})}),(0,r.jsxs)(x.Wu,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"ステータス"}),(t=u.status)?(0,r.jsx)(o.E,{variant:{active:"default",paused:"secondary",completed:"outline"}[t]||"outline",children:t.charAt(0).toUpperCase()+t.slice(1)}):(0,r.jsx)(o.E,{variant:"outline",children:"未設定"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"契約開始日"}),(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),E(u.start_date||"")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"契約終了日"}),(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),E(u.end_date||"")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"企業数"}),(0,r.jsxs)("p",{children:[u.company_count||u.companies?.length||0," 社"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"進行状況"}),(0,r.jsx)("p",{children:u.progress_status||"未設定"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"アポ数"}),(0,r.jsx)("p",{className:"font-medium text-blue-600",children:u.appointment_count||0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"承認数"}),(0,r.jsx)("p",{className:"font-medium text-green-600",children:u.approval_count||0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"返信数"}),(0,r.jsx)("p",{className:"font-medium text-orange-600",children:u.reply_count||0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"友達数"}),(0,r.jsx)("p",{className:"font-medium text-purple-600",children:u.friends_count||0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"ディレクター"}),(0,r.jsx)("p",{children:u.director||"未設定"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"運用者"}),(0,r.jsx)("p",{children:u.operator||"未設定"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"営業マン"}),(0,r.jsx)("p",{children:u.sales_person||"未設定"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"運用開始日"}),(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),E(u.operation_start_date||"")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"終了予定日"}),(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),E(u.expected_end_date||"")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"作成日"}),(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),E(u.created_at)]})]})]}),u.description&&(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,r.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-2",children:"説明"}),(0,r.jsx)("p",{className:"text-sm leading-relaxed",children:u.description})]})]})]}),(0,r.jsx)(N,{companies:u.companies||[],onUpdateStatus:S,onRemoveCompany:async e=>{await M(Number(e))},onToggleActive:$,onAddCompany:()=>{p.push(`/projects/${e}/add-companies`)},projectId:e})]})}},2953:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},3018:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>l,TN:()=>c,XL:()=>d});var r=s(687);s(3210);var a=s(4224),n=s(6241);let i=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return(0,r.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(i({variant:t}),e),...s})}function d({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"alert-title",className:(0,n.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function c({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3143:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4380:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var r=s(5239),a=s(8088),n=s(8170),i=s.n(n),l=s(893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c={children:["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5950)),"/app/app/projects/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/app/app/projects/[id]/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5717:(e,t,s)=>{Promise.resolve().then(s.bind(s,2695)),Promise.resolve().then(s.bind(s,2571))},5950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(7413),a=s(1120),n=s(532),i=s(2094);function l({params:e}){let t=(0,a.use)(e).id;return(0,r.jsx)(n.MainLayout,{children:(0,r.jsx)(i.ProjectDetailClient,{projectId:t})})}},6474:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8233:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8559:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[188,525,133,208,628,385,976,852],()=>s(4380));module.exports=r})();