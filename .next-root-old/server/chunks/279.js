exports.id=279,exports.ids=[279],exports.modules={214:(e,t,a)=>{"use strict";a.d(t,{M:()=>g});var s=a(687),r=a(3210),l=a(6189),n=a(4934),i=a(8988),c=a(9390),o=a(5616),u=a(8302),d=a(3974),h=a(5192),p=a(3193),m=a(638);let x=["IT・ソフトウェア","マーケティング・広告","製造業","金融・保険","不動産","小売・EC","医療・ヘルスケア","教育","その他"];function g({client:e,onSubmit:t}){let a=(0,l.useRouter)(),[g,j]=(0,r.useState)(!1),[y,f]=(0,r.useState)(null),[v,w]=(0,r.useState)({name:e?.name||"",contact_person:e?.contact_person||"",email:e?.email||"",phone:e?.phone||"",industry:e?.industry||"",notes:e?.notes||"",is_active:e?.is_active??!0}),b=async e=>{if(e.preventDefault(),!v.name.trim()){f("クライアント名は必須です");return}try{j(!0),f(null),await t({...v,projects:[],project_count:0,active_project_count:0}),a.push("/clients")}catch(e){f(e instanceof Error?e.message:"クライアントの保存に失敗しました")}finally{j(!1)}},S=(e,t)=>{w(a=>({...a,[e]:t}))};return(0,s.jsxs)(h.Zp,{children:[(0,s.jsx)(h.aR,{children:(0,s.jsx)(h.ZB,{children:e?"クライアント編集":"新規クライアント作成"})}),(0,s.jsx)(h.Wu,{children:(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[y&&(0,s.jsx)(m.$,{message:y}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"name",children:"クライアント名 *"}),(0,s.jsx)(i.p,{id:"name",value:v.name,onChange:e=>S("name",e.target.value),placeholder:"株式会社〇〇",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"contact_person",children:"担当者名"}),(0,s.jsx)(i.p,{id:"contact_person",value:v.contact_person,onChange:e=>S("contact_person",e.target.value),placeholder:"山田 太郎"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"email",children:"メールアドレス"}),(0,s.jsx)(i.p,{id:"email",type:"email",value:v.email,onChange:e=>S("email",e.target.value),placeholder:"contact@example.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"phone",children:"電話番号"}),(0,s.jsx)(i.p,{id:"phone",type:"tel",value:v.phone,onChange:e=>S("phone",e.target.value),placeholder:"03-1234-5678"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"industry",children:"業界"}),(0,s.jsxs)(d.l6,{value:v.industry,onValueChange:e=>S("industry",e),children:[(0,s.jsx)(d.bq,{children:(0,s.jsx)(d.yv,{placeholder:"業界を選択"})}),(0,s.jsx)(d.gC,{children:x.map(e=>(0,s.jsx)(d.eb,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"notes",children:"備考"}),(0,s.jsx)(o.T,{id:"notes",value:v.notes,onChange:e=>S("notes",e.target.value),placeholder:"クライアントに関する特記事項",rows:4})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.d,{id:"is_active",checked:v.is_active,onCheckedChange:e=>S("is_active",e)}),(0,s.jsx)(c.J,{htmlFor:"is_active",children:"アクティブ状態"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:g,children:"キャンセル"}),(0,s.jsxs)(n.$,{type:"submit",disabled:g,children:[g&&(0,s.jsx)(p.k,{}),e?"更新":"作成"]})]})]})})]})}},5616:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});var s=a(687);a(3210);var r=a(6241);function l({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}},6487:()=>{},8335:()=>{},8508:(e,t,a)=>{"use strict";a.d(t,{B:()=>u,Kz:()=>o,aq:()=>i,tH:()=>c});var s=a(3210),r=a(7163);let l=(...e)=>{},n=(...e)=>{};function i(e={}){let{page:t=1,limit:a=50,filters:c={}}=e,[o,u]=(0,s.useState)([]),[d,h]=(0,s.useState)(!0),[p,m]=(0,s.useState)(null),[x,g]=(0,s.useState)({page:1,limit:50,total:0,total_pages:1}),j=async()=>{try{h(!0),m(null);let e=new URLSearchParams({page:t.toString(),page_size:a.toString(),...Object.fromEntries(Object.entries(c).filter(([e,t])=>void 0!==t&&""!==t&&("industry"!==e||"all"!==t)))}),s=await r.uE.get(`/clients?${e}`);l("一覧レスポンス",s);let i=await s.json();l("APIレスポンス構造",i),i&&"object"==typeof i?Array.isArray(i.results)?(u(i.results),g({page:t,limit:a,total:i.count||0,total_pages:Math.ceil((i.count||0)/a)})):Array.isArray(i)?(u(i),g({page:t,limit:a,total:i.length,total_pages:Math.ceil(i.length/a)})):(n("Unexpected response format",i),m("予期しないAPIレスポンス形式")):m("APIからデータを取得できませんでした")}catch(e){m(e instanceof Error?e.message:"クライアント一覧の取得に失敗しました")}finally{h(!1)}};(0,s.useEffect)(()=>{j()},[t,a,JSON.stringify(c)]);let y=async e=>{try{l("クライアント作成",e);let t=await r.uE.post("/clients/",e);if(t.ok){let e=await t.json();return l("クライアント作成成功",e),await j(),e}throw Error("クライアントの作成に失敗しました")}catch(e){throw e}},f=async(e,t)=>{try{l("クライアント更新",{id:e,clientData:t});let a=await r.uE.put(`/clients/${e}/`,t);if(a.ok){let e=await a.json();return l("クライアント更新成功",e),await j(),e}throw Error("クライアントの更新に失敗しました")}catch(e){throw e}};return{clients:o,loading:d,error:p,pagination:x,refetch:j,createClient:y,updateClient:f}}function c(e){let[t,a]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0),[c,o]=(0,s.useState)(null);return{client:t,loading:n,error:c,refetch:async()=>{try{i(!0),o(null),l("クライアント詳細を取得",{id:e});let t=await r.uE.get(`/clients/${e}`);if(t.ok){let e=await t.json();l("クライアント詳細取得成功",e),e&&e.id?a(e):o("クライアント詳細データが見つかりません")}else throw Error("クライアント詳細の取得に失敗しました")}catch(e){o(e instanceof Error?e.message:"クライアント詳細の取得に失敗しました")}finally{i(!1)}}}}function o(e){let[t,a]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0),[c,o]=(0,s.useState)(null);return{stats:t,loading:n,error:c,refetch:async()=>{try{i(!0),o(null),l("クライアント統計情報を取得",{id:e});let t=await r.uE.get(`/clients/${e}/stats`);if(t.ok){let e=await t.json();l("クライアント統計情報取得成功",e),e?a(e):o("統計情報が見つかりません")}else throw Error("統計情報の取得に失敗しました")}catch(e){o(e instanceof Error?e.message:"統計情報の取得に失敗しました")}finally{i(!1)}}}}function u(e){let[t,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[c,o]=(0,s.useState)(null);return{projects:t,loading:n,error:c,refetch:async()=>{try{i(!0),o(null),l("クライアント関連案件を取得",{id:e});let t=await r.uE.get(`/clients/${e}/projects`);if(t.ok){let e=await t.json();l("クライアント関連案件取得成功",e),e&&Array.isArray(e.results)?a(e.results):e&&Array.isArray(e)?a(e):o("関連案件データが見つかりません")}else throw Error("関連案件の取得に失敗しました")}catch(e){o(e instanceof Error?e.message:"関連案件の取得に失敗しました")}finally{i(!1)}}}}},8559:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(2688).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9979:(e,t,a)=>{"use strict";function s(){return null}a.r(t),a.d(t,{default:()=>s})}};