(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3345],{3518:(e,s,a)=>{"use strict";a.d(s,{R:()=>c});var t=a(2115),n=a(98),l=a(1056),i=a(7259);function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,[c,r]=(0,t.useState)([]),[d,x]=(0,t.useState)({page:1,limit:100,total:0,total_pages:0}),[h,o]=(0,t.useState)(!0),[m,j]=(0,t.useState)(null),u=async()=>{if(!l.authService.isAuthenticated()){o(!1),window.location.href="/login";return}o(!0),j(null);try{let t=[],l=s,c=!0;for(;c&&t.length<100;){let r=new URLSearchParams({page:l.toString(),page_size:a.toString()});e.search&&r.append("search",e.search),e.industry&&r.append("industry",e.industry),e.employee_min&&r.append("employee_min",e.employee_min.toString()),e.employee_max&&r.append("employee_max",e.employee_max.toString()),e.revenue_min&&r.append("revenue_min",e.revenue_min.toString()),e.revenue_max&&r.append("revenue_max",e.revenue_max.toString()),e.prefecture&&r.append("prefecture",e.prefecture),e.established_year_min&&r.append("established_year_min",e.established_year_min.toString()),e.established_year_max&&r.append("established_year_max",e.established_year_max.toString()),void 0!==e.has_facebook&&r.append("has_facebook",e.has_facebook.toString()),void 0!==e.exclude_ng&&r.append("exclude_ng",e.exclude_ng.toString()),e.project_id&&r.append("project_id",e.project_id.toString());let d=await n.uE.get("".concat(i.i3.ENDPOINTS.COMPANIES,"?").concat(r.toString()));if(d&&d.results&&Array.isArray(d.results)){let e=d.results,n=new Set(t.map(e=>e.id)),i=e.filter(e=>!n.has(e.id));if(t=[...t,...i],c=!!d.next&&d.results.length>0,++l===s+1){let e=Math.ceil(d.count/a);x({page:s,limit:a,total:d.count,total_pages:e})}}else c=!1;if(l>s+10)break}r(t)}catch(e){j(e instanceof Error?e.message:"企業データの取得に失敗しました"),r([]),x({page:1,limit:100,total:0,total_pages:0})}finally{o(!1)}};return(0,t.useEffect)(()=>{u()},[JSON.stringify(e),s,a]),{companies:c,pagination:d,isLoading:h,error:m,refetch:u,bulkAddCompaniesToProjects:(e,s)=>n.uE.post(i.i3.ENDPOINTS.COMPANY_BULK_ADD_TO_PROJECTS,{company_ids:e,project_ids:s})}}},4400:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>M});var t=a(5155),n=a(2115),l=a(3983),i=a(5646),c=a(7168),r=a(8482),d=a(4964),x=a(8145),h=a(2193),o=a(3014),m=a(6108),j=a(9852),u=a(8524),p=a(7924),v=a(4616),N=a(7434),g=a(1788),f=a(9869),y=a(5339),_=a(2525),w=a(3580),b=a(98),S=a(7259),A=a(1056),C=a(2714),E=a(9840),k=a(1154),G=a(3227),R=a(3518);function Z(e){let{open:s,onOpenChange:a,onAddToNGList:l,clientId:i}=e,[d,h]=(0,n.useState)(""),[o,m]=(0,n.useState)(""),[N,g]=(0,n.useState)(null),[f,y]=(0,n.useState)(!1),{toast:_}=(0,w.dj)(),{companies:b,isLoading:S}=(0,R.R)({search:d,limit:20}),A=e=>{g(e),m("")},Z=async()=>{if(!N){_({title:"エラー",description:"企業を選択してください",variant:"destructive"});return}y(!0);try{let e=o.trim();await l(N,e||void 0),_({title:"追加完了",description:"".concat(N.name,"をNGリストに追加しました")}),g(null),m(""),h(""),a(!1)}catch(e){_({title:"エラー",description:"NGリストへの追加に失敗しました",variant:"destructive"})}finally{y(!1)}},$=()=>{g(null),m(""),h(""),a(!1)};return(0,t.jsx)(E.lG,{open:s,onOpenChange:$,children:(0,t.jsxs)(E.Cf,{className:"max-w-4xl max-h-[80vh] flex flex-col overflow-y-auto",children:[(0,t.jsx)(E.c7,{children:(0,t.jsxs)(E.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5"}),"企業検索からNG企業追加"]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-4 pr-1",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"search",children:"企業名で検索"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(j.p,{id:"search",placeholder:"企業名を入力してください...",value:d,onChange:e=>h(e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)(r.Zp,{className:"flex-1 overflow-hidden",children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)(r.ZB,{className:"text-lg",children:["検索結果 (",b.length,"件)"]})}),(0,t.jsx)(r.Wu,{className:"overflow-auto max-h-[320px]",children:S?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(k.A,{className:"h-6 w-6 animate-spin mr-2"}),"検索中..."]}):0===b.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:d?"該当する企業が見つかりません":"企業情報が登録されていません"}):(0,t.jsxs)(u.XI,{children:[(0,t.jsx)(u.A0,{children:(0,t.jsxs)(u.Hj,{children:[(0,t.jsx)(u.nd,{className:"w-12",children:"選択"}),(0,t.jsx)(u.nd,{children:"企業名"}),(0,t.jsx)(u.nd,{children:"業界"}),(0,t.jsx)(u.nd,{children:"所在地"}),(0,t.jsx)(u.nd,{children:"従業員数"})]})}),(0,t.jsx)(u.BF,{children:b.map(e=>(0,t.jsxs)(u.Hj,{className:(null==N?void 0:N.id)===e.id?"bg-blue-50":"cursor-pointer hover:bg-gray-50",onClick:()=>A(e),children:[(0,t.jsx)(u.nA,{children:(0,t.jsx)("div",{className:"flex justify-center",children:(null==N?void 0:N.id)===e.id&&(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})}),(0,t.jsx)(u.nA,{className:"font-medium",children:e.name}),(0,t.jsx)(u.nA,{children:e.industry}),(0,t.jsx)(u.nA,{children:e.prefecture}),(0,t.jsx)(u.nA,{children:e.employee_count?"".concat(e.employee_count,"名"):"-"})]},e.id))})]})})]}),N&&(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-lg",children:"選択された企業"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:N.name}),(0,t.jsx)(x.E,{variant:"outline",children:N.industry}),(0,t.jsx)(x.E,{variant:"outline",children:N.prefecture})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.J,{htmlFor:"ng-reason",children:"NG理由（任意）"}),(0,t.jsx)(j.p,{id:"ng-reason",placeholder:"例: 競合他社、既存取引先、対象外業界など",value:o,onChange:e=>m(e.target.value),maxLength:100}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[o.length,"/100文字"]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,t.jsx)(c.$,{variant:"outline",onClick:$,disabled:f,children:"キャンセル"}),(0,t.jsxs)(c.$,{onClick:Z,disabled:!N||f,children:[(0,t.jsx)(v.A,{className:"h-4 w-4 mr-2"}),f?"追加中...":"NGリストに追加"]})]})]})})}function $(e){let{clientId:s}=e,[a,l]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),{ngList:m,stats:C,isLoading:E,error:k,importCSV:G,deleteNG:R,addCompanyToNG:$}=function(e){let[s,a]=(0,n.useState)([]),[t,l]=(0,n.useState)({count:0,matched_count:0,unmatched_count:0}),[i,c]=(0,n.useState)(!1),[r,d]=(0,n.useState)(null),x=async()=>{if(!A.authService.isAuthenticated()){c(!1);return}c(!0),d(null);try{let s=await b.uE.get("/clients/".concat(e,"/ng-companies"));a(s.results||[]),l({count:s.count||0,matched_count:s.matched_count||0,unmatched_count:s.unmatched_count||0})}catch(e){d("NGリストの取得に失敗しました"),a([]),l({count:0,matched_count:0,unmatched_count:0})}finally{c(!1)}},h=async s=>{try{let a=await b.uE.uploadFile(S.i3.ENDPOINTS.NG_COMPANY_IMPORT(e.toString()),s);return await x(),a}catch(e){throw Error("CSVインポートに失敗しました")}},o=async s=>{try{await b.uE.delete("/clients/".concat(e,"/ng-companies/").concat(s)),await x()}catch(e){throw Error("NG企業の削除に失敗しました")}},m=async(s,a,t)=>{try{await b.uE.post("/clients/".concat(e,"/ng-companies/add/"),{company_id:s,company_name:a,reason:null!=t?t:""}),await x()}catch(e){throw Error("NG企業の追加に失敗しました")}};return(0,n.useEffect)(()=>{e&&x()},[e]),{ngList:s,stats:t,isLoading:i,error:r,importCSV:h,deleteNG:o,addCompanyToNG:m,refetch:x}}(s),{toast:O}=(0,w.dj)(),J=async e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){if(!a.name.endsWith(".csv")){O({title:"エラー",description:"CSVファイルを選択してください",variant:"destructive"});return}l(!0);try{let e=await G(a);O({title:"インポート完了",description:"".concat(e.imported_count,"件のNGリストを登録しました（マッチ: ").concat(e.matched_count,"件）")}),e.errors.length>0&&O({title:"一部エラーがありました",description:"".concat(e.errors.length,"件のエラーがありました"),variant:"destructive"})}catch(e){O({title:"エラー",description:"インポートに失敗しました",variant:"destructive"})}finally{l(!1),e.target.value=""}}},L=async e=>{if(confirm("このNG企業を削除しますか？"))try{await R(e),O({title:"削除完了",description:"NG企業を削除しました"})}catch(e){O({title:"エラー",description:"削除に失敗しました",variant:"destructive"})}},B=async(e,s)=>{await $(e.id,e.name,s)};return E?(0,t.jsx)(h.k,{}):k?(0,t.jsx)(o.$,{message:k}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-5 w-5"}),"企業検索からNG企業追加"]})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"企業管理データから企業を検索してNGリストに追加できます"}),(0,t.jsxs)(c.$,{onClick:()=>d(!0),children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"企業検索"]})]})})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"登録済みNGリスト (",C.count,"件)"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(x.E,{variant:"default",children:["マッチ済: ",C.matched_count]}),(0,t.jsxs)(x.E,{variant:"secondary",children:["未マッチ: ",C.unmatched_count]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.$,{variant:"outline",onClick:()=>{let e=new Blob(["企業名,理由\n株式会社サンプル,競合他社\n○○商事,既存取引先\n"],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="ng_list_template.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},disabled:a,size:"sm",children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"CSVテンプレート"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(j.p,{type:"file",accept:".csv",onChange:J,disabled:a,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"csv-import"}),(0,t.jsx)(c.$,{variant:"default",disabled:a,size:"sm",asChild:!0,children:(0,t.jsx)("label",{htmlFor:"csv-import",className:"cursor-pointer",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.k,{size:"sm",className:"mr-2"}),"インポート中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"CSVインポート"]})})})]})]})]})}),(0,t.jsx)(r.Wu,{children:0===m.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(y.A,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"NGリストが登録されていません"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"企業検索またはCSVインポートでNGリストを登録してください"})]}):(0,t.jsxs)(u.XI,{children:[(0,t.jsx)(u.A0,{children:(0,t.jsxs)(u.Hj,{children:[(0,t.jsx)(u.nd,{children:"企業名"}),(0,t.jsx)(u.nd,{children:"マッチ状態"}),(0,t.jsx)(u.nd,{children:"理由"}),(0,t.jsx)(u.nd,{children:"登録日"}),(0,t.jsx)(u.nd,{className:"w-20",children:"操作"})]})}),(0,t.jsx)(u.BF,{children:m.map(e=>(0,t.jsxs)(u.Hj,{children:[(0,t.jsx)(u.nA,{className:"font-medium",children:e.company_name}),(0,t.jsx)(u.nA,{children:e.matched?(0,t.jsx)(x.E,{variant:"default",children:"マッチ済"}):(0,t.jsx)(x.E,{variant:"outline",children:"未マッチ"})}),(0,t.jsx)(u.nA,{children:e.reason||"-"}),(0,t.jsx)(u.nA,{children:new Date(e.created_at).toLocaleDateString("ja-JP")}),(0,t.jsx)(u.nA,{children:(0,t.jsx)(c.$,{size:"sm",variant:"ghost",onClick:()=>L(e.id),className:"h-8 w-8 p-0","aria-label":"".concat(e.company_name,"をNGリストから削除"),children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,t.jsx)(Z,{open:i,onOpenChange:d,onAddToNGList:B,clientId:s})]})}var O=a(7550),J=a(7580),L=a(3717),B=a(5525),F=a(4395),P=a(2713),z=a(6874),T=a.n(z),I=a(9474);function M(e){let{params:s}=e,a=Number.parseInt((0,n.use)(s).id);return(0,t.jsx)(W,{id:a})}function W(e){let{id:s}=e,[a,u]=(0,n.useState)(!1),[p,v]=(0,n.useState)(!1),[N,g]=(0,n.useState)(""),[f,y]=(0,n.useState)(""),[_,w]=(0,n.useState)(""),{client:A,loading:k,error:R}=(0,l.tH)(s),{stats:Z,loading:z}=(0,l.Kz)(s),{projects:M,loading:W,refetch:D}=(0,l.B)(s),{updateClient:U}=(0,l.aq)(),V=async()=>{if(N.trim()){v(!0);try{let e={name:N,description:f,manager_name:_,status:"planning",client_company:(null==A?void 0:A.name)||"",client_id:(null==A?void 0:A.id)||null};await b.uE.post(S.i3.ENDPOINTS.PROJECTS,e),await D(),g(""),y(""),w("")}catch(e){}finally{v(!1)}}};return k?(0,t.jsx)(i.MainLayout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)(h.k,{})})}):R||!A?(0,t.jsx)(i.MainLayout,{children:(0,t.jsx)(o.$,{message:R||"クライアントが見つかりません"})}):(0,t.jsx)(i.MainLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(T(),{href:"/clients",children:(0,t.jsxs)(c.$,{variant:"ghost",size:"sm",children:[(0,t.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"クライアント一覧へ"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:A.name}),(0,t.jsx)("p",{className:"text-gray-600",children:A.industry})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.E,{variant:A.is_active?"default":"secondary",children:A.is_active?"アクティブ":"非アクティブ"}),(0,t.jsx)(T(),{href:"/clients/".concat(s,"/select-companies"),children:(0,t.jsxs)(c.$,{variant:"outline",children:[(0,t.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"営業対象企業を選択"]})}),(0,t.jsxs)(c.$,{onClick:()=>u(!a),variant:a?"secondary":"default",children:[(0,t.jsx)(L.A,{className:"h-4 w-4 mr-2"}),a?"編集終了":"編集"]})]})]}),a?(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(r.ZB,{children:"クライアント情報編集"}),(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>u(!1),children:"キャンセル"})]})}),(0,t.jsx)(r.Wu,{children:(0,t.jsx)(m.M,{client:A,onSubmit:async e=>{await U(s,e),u(!1)}})})]}):(0,t.jsxs)(d.tU,{defaultValue:"basic-info",className:"space-y-6",children:[(0,t.jsxs)(d.j7,{children:[(0,t.jsxs)(d.Xi,{value:"basic-info",children:[(0,t.jsx)(G.A,{className:"h-4 w-4 mr-2"}),"基本情報"]}),(0,t.jsxs)(d.Xi,{value:"ng-list",children:[(0,t.jsx)(B.A,{className:"h-4 w-4 mr-2"}),"NGリスト"]}),(0,t.jsxs)(d.Xi,{value:"projects",children:[(0,t.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"案件一覧"]}),(0,t.jsxs)(d.Xi,{value:"stats",children:[(0,t.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"統計情報"]})]}),(0,t.jsx)(d.av,{value:"basic-info",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"基本情報"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{className:"text-sm font-medium text-gray-700",children:"担当者名"}),(0,t.jsx)("p",{className:"text-gray-900",children:A.contact_person||"未設定"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{className:"text-sm font-medium text-gray-700",children:"メールアドレス"}),(0,t.jsx)("p",{className:"text-gray-900",children:A.email||"未設定"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{className:"text-sm font-medium text-gray-700",children:"電話番号"}),(0,t.jsx)("p",{className:"text-gray-900",children:A.phone||"未設定"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{className:"text-sm font-medium text-gray-700",children:"業界"}),(0,t.jsx)("p",{className:"text-gray-900",children:A.industry||"未設定"})]})]}),A.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{className:"text-sm font-medium text-gray-700",children:"備考"}),(0,t.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:A.notes})]}),(0,t.jsx)("div",{className:"pt-4 border-t",children:(0,t.jsx)(T(),{href:"/clients/".concat(s,"/select-companies"),children:(0,t.jsxs)(c.$,{className:"w-full",children:[(0,t.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"営業対象企業を選択して案件を作成"]})})})]})]})}),(0,t.jsx)(d.av,{value:"ng-list",children:(0,t.jsx)($,{clientId:s})}),(0,t.jsx)(d.av,{value:"projects",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(r.ZB,{children:"案件一覧"}),(0,t.jsxs)(E.lG,{children:[(0,t.jsx)(E.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{size:"sm",children:[(0,t.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"新規案件作成"]})}),(0,t.jsxs)(E.Cf,{children:[(0,t.jsx)(E.c7,{children:(0,t.jsx)(E.L3,{children:"新規案件作成"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"project-name",children:"案件名"}),(0,t.jsx)(j.p,{id:"project-name",placeholder:"案件名を入力",value:N,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"project-description",children:"概要"}),(0,t.jsx)(I.T,{id:"project-description",placeholder:"案件の概要を入力",value:f,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"assigned-user",children:"担当者"}),(0,t.jsx)(j.p,{id:"assigned-user",placeholder:"担当者名を入力",value:_,onChange:e=>w(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(c.$,{variant:"outline",children:"キャンセル"}),(0,t.jsx)(c.$,{onClick:V,disabled:p,children:p?"作成中...":"作成"})]})]})]})]})]})}),(0,t.jsx)(r.Wu,{children:W?(0,t.jsx)(h.k,{}):M.length>0?(0,t.jsx)("div",{className:"space-y-4",children:M.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)(T(),{href:"/projects/".concat(e.id),className:"block",children:[(0,t.jsx)("h3",{className:"font-medium text-blue-600 hover:text-blue-800",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["企業数: ",e.company_count||0,"社 | 作成日:"," ",new Date(e.created_at).toLocaleDateString()]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.E,{variant:"in_progress"===e.status?"default":"secondary",children:"in_progress"===e.status?"進行中":"completed"===e.status?"完了":"planning"===e.status?"計画中":"中止"}),(0,t.jsx)(T(),{href:"/clients/".concat(s,"/select-companies?project=").concat(e.id),children:(0,t.jsxs)(c.$,{size:"sm",variant:"outline",children:[(0,t.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"企業追加"]})})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"関連案件がありません"}),(0,t.jsxs)(E.lG,{children:[(0,t.jsx)(E.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{children:[(0,t.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"最初の案件を作成"]})}),(0,t.jsxs)(E.Cf,{children:[(0,t.jsx)(E.c7,{children:(0,t.jsx)(E.L3,{children:"新規案件作成"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"project-name",children:"案件名"}),(0,t.jsx)(j.p,{id:"project-name",placeholder:"案件名を入力",value:N,onChange:e=>g(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"project-description",children:"概要"}),(0,t.jsx)(I.T,{id:"project-description",placeholder:"案件の概要を入力",value:f,onChange:e=>y(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(C.J,{htmlFor:"assigned-user",children:"担当者"}),(0,t.jsx)(j.p,{id:"assigned-user",placeholder:"担当者名を入力",value:_,onChange:e=>w(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(c.$,{variant:"outline",children:"キャンセル"}),(0,t.jsx)(c.$,{onClick:V,disabled:p,children:p?"作成中...":"作成"})]})]})]})]})]})})]})}),(0,t.jsx)(d.av,{value:"stats",children:(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:z?(0,t.jsx)(h.k,{}):Z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-sm",children:"総案件数"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:Z.project_count||0}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["進行中: ",Z.active_project_count||0,"件"]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-sm",children:"総企業数"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("p",{className:"text-2xl font-bold",children:Z.total_companies||0}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["コンタクト済: ",Z.total_contacted||0,"社"]})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-sm",children:"成約率"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsxs)("p",{className:"text-2xl font-bold",children:[Z.success_rate||0,"%"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["完了案件: ",Z.completed_project_count||0,"件"]})]})]})]}):(0,t.jsx)("p",{className:"text-gray-500",children:"統計情報を取得できませんでした"})})})]})]})})}},8764:(e,s,a)=>{Promise.resolve().then(a.bind(a,4400))}},e=>{var s=s=>e(e.s=s);e.O(0,[8823,7715,7501,2717,2286,85,3953,6199,5646,7869,5867,9056,8441,1684,7358],()=>s(8764)),_N_E=e.O()}]);