(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7191],{98:(e,t,s)=>{"use strict";s.d(t,{uE:()=>r});var a=s(9509);class n extends Error{constructor(e,t,s){super(e),this.status=t,this.response=s,this.name="ApiError"}}class i{getAuthHeaders(){let e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}}async refreshToken(){return Promise.resolve()}clearTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}async handleResponse(e,t,s){return this.processResponse(e)}async processResponse(e){if(!e.ok){await this.handleUnauthorized(e.status);let t="HTTP ".concat(e.status,": ").concat(e.statusText);try{let s=await e.json();t=s.message||s.error||t}catch(e){}throw new n(t,e.status,e)}let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():e.text()}async handleUnauthorized(e){if((401===e||403===e)&&!this.isHandlingUnauthorized){this.isHandlingUnauthorized=!0;try{let{authService:e}=await Promise.resolve().then(s.bind(s,1056));await e.logout()}catch(e){}finally{try{window.location.href="/login"}finally{this.isHandlingUnauthorized=!1}}}}buildUrl(e){let t=a.env.NEXT_PUBLIC_API_URL+"/api/v1";return"".concat(t).concat(e)}async makeRequest(e,t){return fetch(this.buildUrl(e),{...t,headers:{...t.headers,...this.getAuthHeaders()}})}async get(e,t){let s={method:"GET",headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t},a=await this.makeRequest(e,s);return this.handleResponse(a,e,s)}async post(e,t,s){let a={method:"POST",headers:{"Content-Type":"application/json",...null==s?void 0:s.headers},body:t?JSON.stringify(t):void 0,...s},n=await this.makeRequest(e,a);return this.handleResponse(n,e,a)}async put(e,t,s){let a={method:"PUT",headers:{"Content-Type":"application/json",...null==s?void 0:s.headers},body:t?JSON.stringify(t):void 0,...s},n=await this.makeRequest(e,a);return this.handleResponse(n,e,a)}async patch(e,t,s){let a={method:"PATCH",headers:{"Content-Type":"application/json",...null==s?void 0:s.headers},body:t?JSON.stringify(t):void 0,...s},n=await this.makeRequest(e,a);return this.handleResponse(n,e,a)}async delete(e,t){let s={method:"DELETE",headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t},a=await this.makeRequest(e,s);return this.handleResponse(a,e,s)}async uploadFile(e,t,s){let a=new FormData;a.append("file",t),s&&Object.entries(s).forEach(e=>{let[t,s]=e;a.append(t,String(s))});let n={method:"POST",body:a},i=await this.makeRequest(e,n);return this.handleResponse(i,e,n)}async downloadFile(e){let t=await this.makeRequest(e,{method:"GET"});if(!t.ok)throw new n("Failed to download file: ".concat(t.statusText),t.status,t);return t.blob()}constructor(){this.retryCount=0,this.maxRetries=0,this.isRefreshingToken=!1,this.refreshPromise=null,this.isHandlingUnauthorized=!1}}let r=new i},1573:(e,t,s)=>{Promise.resolve().then(s.bind(s,3911))},3911:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),n=s(5695),i=s(6874),r=s.n(i),o=s(5646),l=s(1879),h=s(7168),d=s(7550),c=s(98),u=s(3580);function p(){let e=(0,n.useRouter)(),{toast:t}=(0,u.dj)(),s=async s=>{try{let a=await c.uE.post("/companies/",s);t({title:"企業作成成功",description:"企業「".concat((null==a?void 0:a.name)||"新規企業","」を作成しました")}),e.push("/companies?refresh=true")}catch(e){t({title:"企業作成失敗",description:"企業の作成に失敗しました。もう一度お試しください。",variant:"destructive"})}};return(0,a.jsx)(o.MainLayout,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(h.$,{variant:"outline",asChild:!0,children:(0,a.jsxs)(r(),{href:"/companies",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"企業一覧に戻る"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"新規企業登録"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"新しい企業をデータベースに追加"})]})]}),(0,a.jsx)(l.A,{onSave:s,onCancel:()=>{e.push("/companies")}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8823,7715,7501,2717,2286,5646,1926,8441,1684,7358],()=>t(1573)),_N_E=e.O()}]);