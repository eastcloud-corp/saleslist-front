(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7660],{98:(e,t,a)=>{"use strict";a.d(t,{uE:()=>r});var s=a(9509);class n extends Error{constructor(e,t,a){super(e),this.status=t,this.response=a,this.name="ApiError"}}class o{getAuthHeaders(){let e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}}async refreshToken(){return Promise.resolve()}clearTokens(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}async handleResponse(e,t,a){return this.processResponse(e)}async processResponse(e){if(!e.ok){await this.handleUnauthorized(e.status);let t="HTTP ".concat(e.status,": ").concat(e.statusText);try{let a=await e.json();t=a.message||a.error||t}catch(e){}throw new n(t,e.status,e)}let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():e.text()}async handleUnauthorized(e){if((401===e||403===e)&&!this.isHandlingUnauthorized){this.isHandlingUnauthorized=!0;try{let{authService:e}=await Promise.resolve().then(a.bind(a,1056));await e.logout()}catch(e){}finally{try{window.location.href="/login"}finally{this.isHandlingUnauthorized=!1}}}}buildUrl(e){let t=s.env.NEXT_PUBLIC_API_URL+"/api/v1";return"".concat(t).concat(e)}async makeRequest(e,t){return fetch(this.buildUrl(e),{...t,headers:{...t.headers,...this.getAuthHeaders()}})}async get(e,t){let a={method:"GET",headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t},s=await this.makeRequest(e,a);return this.handleResponse(s,e,a)}async post(e,t,a){let s={method:"POST",headers:{"Content-Type":"application/json",...null==a?void 0:a.headers},body:t?JSON.stringify(t):void 0,...a},n=await this.makeRequest(e,s);return this.handleResponse(n,e,s)}async put(e,t,a){let s={method:"PUT",headers:{"Content-Type":"application/json",...null==a?void 0:a.headers},body:t?JSON.stringify(t):void 0,...a},n=await this.makeRequest(e,s);return this.handleResponse(n,e,s)}async patch(e,t,a){let s={method:"PATCH",headers:{"Content-Type":"application/json",...null==a?void 0:a.headers},body:t?JSON.stringify(t):void 0,...a},n=await this.makeRequest(e,s);return this.handleResponse(n,e,s)}async delete(e,t){let a={method:"DELETE",headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t},s=await this.makeRequest(e,a);return this.handleResponse(s,e,a)}async uploadFile(e,t,a){let s=new FormData;s.append("file",t),a&&Object.entries(a).forEach(e=>{let[t,a]=e;s.append(t,String(a))});let n={method:"POST",body:s},o=await this.makeRequest(e,n);return this.handleResponse(o,e,n)}async downloadFile(e){let t=await this.makeRequest(e,{method:"GET"});if(!t.ok)throw new n("Failed to download file: ".concat(t.statusText),t.status,t);return t.blob()}constructor(){this.retryCount=0,this.maxRetries=0,this.isRefreshingToken=!1,this.refreshPromise=null,this.isHandlingUnauthorized=!1}}let r=new o},199:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),n=a(2115),o=a(5646),r=a(7168),i=a(9840),l=a(6193),c=a(98),d=a(7259),u=a(9869),h=a(646);function p(e){let{open:t,onOpenChange:a,onImport:o}=e,[p,m]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[v,x]=(0,n.useState)(!1),[y,E]=(0,n.useState)(0),[T,N]=(0,n.useState)("upload"),_=e=>{m(e),j(e)},j=async e=>{g(!0),N("complete"),g(!1)},C=async()=>{if(p){x(!0),E(0);try{let[l,...u]=(await p.text()).split("\n").filter(e=>e.trim());for(let o=0;o<u.length;o++){var e,t,a,s,n,r,i;let l=u[o].split(","),h={company_name:null===(e=l[0])||void 0===e?void 0:e.trim(),name:null===(t=l[1])||void 0===t?void 0:t.trim(),position:null===(a=l[2])||void 0===a?void 0:a.trim(),facebook_url:null===(s=l[3])||void 0===s?void 0:s.trim(),other_sns_url:null===(n=l[4])||void 0===n?void 0:n.trim(),direct_email:null===(r=l[5])||void 0===r?void 0:r.trim(),notes:null===(i=l[6])||void 0===i?void 0:i.trim()};h.company_name&&h.name&&await c.uE.post(d.i3.ENDPOINTS.EXECUTIVES,h),E(Math.round((o+1)/u.length*100))}await o([]),N("complete")}catch(e){}finally{x(!1)}}},w=()=>{m(null),g(!1),x(!1),E(0),N("upload")};return(0,s.jsx)(i.lG,{open:t,onOpenChange:e=>{e||w(),a(e)},children:(0,s.jsxs)(i.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(i.c7,{children:(0,s.jsx)(i.L3,{children:"役員CSVインポート"})}),(0,s.jsxs)("div",{className:"space-y-4",children:["upload"===T&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"csv-file",className:"cursor-pointer",children:(0,s.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"CSVファイルをアップロード"})}),(0,s.jsx)("input",{id:"csv-file",type:"file",accept:".csv",className:"hidden",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&_(a)}})]})]})}),(0,s.jsx)(r.$,{onClick:C,className:"w-full",disabled:!p||v,children:v?"インポート中... ".concat(y,"%"):"インポート実行"}),v&&(0,s.jsx)(l.k,{value:y,className:"w-full"})]}),"complete"===T&&(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)(h.A,{className:"mx-auto h-12 w-12 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:"インポート完了"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"役員データのインポートが完了しました"})]}),(0,s.jsx)(r.$,{onClick:()=>a(!1),children:"閉じる"})]})]})]})})}function m(){let[e,t]=(0,n.useState)(!1),a=async e=>{};return(0,s.jsx)(o.MainLayout,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"役員管理"}),(0,s.jsxs)(r.$,{onClick:()=>t(!0),children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"CSVインポート"]})]}),(0,s.jsx)(p,{open:e,onOpenChange:t,onImport:a})]})})}},646:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5475:(e,t,a)=>{Promise.resolve().then(a.bind(a,199))},6193:(e,t,a)=>{"use strict";a.d(t,{k:()=>T});var s=a(5155),n=a(2115);a(7650);var o=a(6634),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,o.TL)(`Primitive.${t}`),r=n.forwardRef((e,n)=>{let{asChild:o,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(o?a:t,{...r,ref:n})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),i="Progress",[l,c]=function(e,t=[]){let a=[],o=()=>{let t=a.map(e=>n.createContext(e));return function(a){let s=a?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return o.scopeName=e,[function(t,o){let r=n.createContext(o),i=a.length;a=[...a,o];let l=t=>{let{scope:a,children:o,...l}=t,c=a?.[e]?.[i]||r,d=n.useMemo(()=>l,Object.values(l));return(0,s.jsx)(c.Provider,{value:d,children:o})};return l.displayName=t+"Provider",[l,function(a,s){let l=s?.[e]?.[i]||r,c=n.useContext(l);if(c)return c;if(void 0!==o)return o;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:s})=>{let n=a(e)[`__scope${s}`];return{...t,...n}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(o,...t)]}(i),[d,u]=l(i),h=n.forwardRef((e,t)=>{let{__scopeProgress:a,value:n=null,max:o,getValueLabel:i=f,...l}=e;(o||0===o)&&x(o);let c=x(o)?o:100;null!==n&&y(n,c);let u=y(n,c)?n:null,h=v(u)?i(u,c):void 0;return(0,s.jsx)(d,{scope:a,value:u,max:c,children:(0,s.jsx)(r.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":v(u)?u:void 0,"aria-valuetext":h,role:"progressbar","data-state":g(u,c),"data-value":null!=u?u:void 0,"data-max":c,...l,ref:t})})});h.displayName=i;var p="ProgressIndicator",m=n.forwardRef((e,t)=>{var a;let{__scopeProgress:n,...o}=e,i=u(p,n);return(0,s.jsx)(r.div,{"data-state":g(i.value,i.max),"data-value":null!==(a=i.value)&&void 0!==a?a:void 0,"data-max":i.max,...o,ref:t})});function f(e,t){return"".concat(Math.round(e/t*100),"%")}function g(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function v(e){return"number"==typeof e}function x(e){return v(e)&&!isNaN(e)&&e>0}function y(e,t){return v(e)&&!isNaN(e)&&e<=t&&e>=0}m.displayName=p;var E=a(3999);function T(e){let{className:t,value:a,...n}=e;return(0,s.jsx)(h,{"data-slot":"progress",className:(0,E.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:(0,s.jsx)(m,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}},7259:(e,t,a)=>{"use strict";a.d(t,{i3:()=>s,uE:()=>r});let s={BASE_URL:a(9509).env.NEXT_PUBLIC_API_URL+"/api/v1",ENDPOINTS:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",REFRESH:"/auth/refresh",ME:"/auth/me",REGISTER:"/auth/register",CLIENTS:"/clients/",CLIENT_DETAIL:e=>"/clients/".concat(e,"/"),COMPANIES:"/companies/",COMPANY_DETAIL:e=>"/companies/".concat(e,"/"),COMPANY_SEARCH:"/companies/search/",COMPANY_EXPORT:"/companies/export/",COMPANY_IMPORT:"/companies/import/",COMPANY_BULK_IMPORT:"/companies/bulk-import/",COMPANY_BULK_ADD_TO_PROJECTS:"/companies/bulk-add-to-projects/",PROJECTS:"/projects/",PROJECT_DETAIL:e=>"/projects/".concat(e,"/"),PROJECT_COMPANIES:e=>"/projects/".concat(e,"/companies/"),PROJECT_IMPORT:"/projects/import_csv/",PROJECT_EXPORT:e=>"/projects/".concat(e,"/export_csv/"),PROJECT_BULK_PARTIAL_UPDATE:"/projects/bulk-partial-update",PROJECT_PAGE_LOCK:"/projects/page-lock/",PROJECT_PAGE_UNLOCK:"/projects/page-unlock/",PROJECT_SNAPSHOTS:e=>"/projects/".concat(e,"/snapshots/"),PROJECT_SNAPSHOT_RESTORE:(e,t)=>"/projects/".concat(e,"/snapshots/").concat(t,"/restore/"),NG_COMPANIES:"/ng-companies/",NG_COMPANY_GLOBAL:"/ng-companies/global/",NG_COMPANY_PROJECT:e=>"/ng-companies/project/".concat(e,"/"),NG_COMPANY_IMPORT:e=>"/clients/".concat(e,"/ng-companies/import"),NG_COMPANY_TEMPLATE:"/ng-companies/template/",EXECUTIVES:"/executives/",EXECUTIVE_DETAIL:e=>"/executives/".concat(e,"/"),EXECUTIVE_IMPORT:"/executives/import_csv/",EXECUTIVE_EXPORT:"/executives/export_csv/",SAVED_FILTERS:"/saved-filters/",FILTER_DETAIL:e=>"/saved-filters/".concat(e,"/"),DASHBOARD_STATS:"/dashboard/stats/",DASHBOARD_RECENT_PROJECTS:"/dashboard/recent-projects/",DASHBOARD_RECENT_COMPANIES:"/dashboard/recent-companies/",MASTER_INDUSTRIES:"/master/industries/",MASTER_STATUSES:"/master/statuses/",MASTER_PREFECTURES:"/master/prefectures/"}};class n extends Error{constructor(e,t,a){super(e),this.status=t,this.response=a,this.name="ApiError"}}class o{async handleUnauthorized(e){if((401===e||403===e)&&!this.isHandlingUnauthorized){this.isHandlingUnauthorized=!0;try{let{authService:e}=await Promise.resolve().then(a.bind(a,1056));await e.logout()}catch(e){}finally{try{window.location.href="/login"}finally{this.isHandlingUnauthorized=!1}}}}getAuthHeaders(){let e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}}buildUrl(e){let t=s.BASE_URL.replace(/\/+$/,""),a=e.replace(/^\/+/,"");return"".concat(t,"/").concat(a)}async get(e,t){let a=await fetch(this.buildUrl(e),{method:"GET",headers:{"Content-Type":"application/json",...this.getAuthHeaders(),...null==t?void 0:t.headers},...t});return await this.handleUnauthorized(a.status),a}async post(e,t,a){let s=await fetch(this.buildUrl(e),{method:"POST",headers:{"Content-Type":"application/json",...this.getAuthHeaders(),...null==a?void 0:a.headers},body:t?JSON.stringify(t):void 0,...a});return await this.handleUnauthorized(s.status),s}async put(e,t,a){let s=await fetch(this.buildUrl(e),{method:"PUT",headers:{"Content-Type":"application/json",...this.getAuthHeaders(),...null==a?void 0:a.headers},body:t?JSON.stringify(t):void 0,...a});return await this.handleUnauthorized(s.status),s}async patch(e,t,a){let s=await fetch(this.buildUrl(e),{method:"PATCH",headers:{"Content-Type":"application/json",...this.getAuthHeaders(),...null==a?void 0:a.headers},body:t?JSON.stringify(t):void 0,...a});return await this.handleUnauthorized(s.status),s}async delete(e,t){let a=await fetch(this.buildUrl(e),{method:"DELETE",headers:{"Content-Type":"application/json",...this.getAuthHeaders(),...null==t?void 0:t.headers},...t});return await this.handleUnauthorized(a.status),a}async uploadFile(e,t,a){let s=new FormData;s.append("file",t),a&&Object.entries(a).forEach(e=>{let[t,a]=e;s.append(t,String(a))});let n=await fetch(this.buildUrl(e),{method:"POST",headers:{...this.getAuthHeaders()},body:s});return await this.handleUnauthorized(n.status),n}async handleResponse(e){if(!e.ok){let t="HTTP ".concat(e.status,": ").concat(e.statusText);try{let a=await e.json();t=a.message||a.error||t}catch(e){}throw new n(t,e.status,e)}let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():e.text()}constructor(){this.isHandlingUnauthorized=!1}}let r=new o},9840:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>p,L3:()=>m,c7:()=>h,lG:()=>i,rr:()=>f,zM:()=>l});var s=a(5155);a(2115);var n=a(85),o=a(4416),r=a(3999);function i(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,s.jsx)(n.l9,{"data-slot":"dialog-trigger",...t})}function c(e){let{...t}=e;return(0,s.jsx)(n.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,showCloseButton:i=!0,...l}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...l,children:[a,i&&(0,s.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(o.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(n.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}},9869:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[8823,7715,7501,2717,85,5646,8441,1684,7358],()=>t(5475)),_N_E=e.O()}]);