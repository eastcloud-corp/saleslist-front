(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662],{88:(e,s,a)=>{"use strict";a.d(s,{d:()=>r});var t=a(5155);a(2115);var l=a(7161),n=a(3999);function r(e){let{className:s,...a}=e;return(0,t.jsx)(l.bL,{"data-slot":"switch",className:(0,n.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(l.zi,{"data-slot":"switch-thumb",className:(0,n.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},2468:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>H});var t=a(5155),l=a(5646),n=a(8482),r=a(4964),i=a(2115),c=a(7168),d=a(9840),o=a(9852),m=a(2714),u=a(5784),h=a(9474),x=a(2318),j=a(646),p=a(4357),v=a(7259);function g(){let[e,s]=(0,i.useState)([]),[a,t]=(0,i.useState)(!1),[l,n]=(0,i.useState)(null),r=async()=>{try{t(!0),n(null);let e=await v.uE.get("/auth/users/");if(e.ok){let a=await e.json();s(a.results||[])}else throw Error("ユーザー一覧の取得に失敗しました")}catch(e){n("ユーザー一覧の取得に失敗しました"),s([])}finally{t(!1)}},c=async e=>{try{return t(!0),n(null),await v.uE.post("/auth/users/create/",{name:e.email.split("@")[0],email:e.email,role:e.role,password:"temp123"}),await r(),{success:!0,message:"ユーザー招待を送信しました"}}catch(s){let e="ユーザー招待の送信に失敗しました";return n(e),{success:!1,message:e}}finally{t(!1)}},d=async(e,s)=>{try{return t(!0),n(null),await v.uE.patch("/auth/users/".concat(e,"/"),{role:s}),await r(),{success:!0,message:"ユーザー権限を更新しました"}}catch(s){let e="ユーザー権限の更新に失敗しました";return n(e),{success:!1,message:e}}finally{t(!1)}},o=async(e,s)=>{try{return t(!0),n(null),await v.uE.patch("/auth/users/".concat(e,"/"),{is_active:s}),await r(),{success:!0,message:"ユーザーを".concat(s?"有効化":"無効化","しました")}}catch(a){let e="ユーザーの".concat(s?"有効化":"無効化","に失敗しました");return n(e),{success:!1,message:e}}finally{t(!1)}},m=async e=>await o(e,!1);return(0,i.useEffect)(()=>{r()},[]),{users:e,loading:a,error:l,fetchUsers:r,refetch:r,inviteUser:c,updateUserRole:d,updateUserStatus:o,deactivateUser:m}}var b=a(2193),f=a(3014);function y(e){let{onUserCreated:s}=e,[a,l]=(0,i.useState)(!1),[n,r]=(0,i.useState)(""),[v,y]=(0,i.useState)(""),[N,w]=(0,i.useState)(""),[_,C]=(0,i.useState)("user"),[k,S]=(0,i.useState)(""),[F,J]=(0,i.useState)(null),[A,E]=(0,i.useState)(null),[$,T]=(0,i.useState)(!1),{inviteUser:Z,loading:B}=g(),z=async()=>{if(A){let e="メールアドレス: ".concat(A.email,"\nパスワード: ").concat(A.password);await navigator.clipboard.writeText(e),T(!0),setTimeout(()=>T(!1),2e3)}},D=async e=>{if(e.preventDefault(),J(null),!n){J("メールアドレスを入力してください");return}if(!N){J("パスワードを入力してください");return}let a=await Z({email:n,password:N,role:_,message:k||void 0});a.success?(E({email:n,password:N}),s&&s()):J(a.message)};return(0,t.jsxs)(d.lG,{open:a,onOpenChange:e=>{l(e),e||(r(""),w(""),C("user"),S(""),E(null),T(!1),J(null))},children:[(0,t.jsx)(d.zM,{asChild:!0,children:(0,t.jsxs)(c.$,{children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"ユーザー作成"]})}),(0,t.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:A?"ユーザー作成完了":"新規ユーザー作成"}),(0,t.jsx)(d.rr,{children:A?"ユーザーが作成されました。以下の認証情報を別ツールで共有してください。":"新しいユーザーを作成します。認証情報は別ツールで共有してください。"})]}),A?(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"p-4 bg-muted rounded-lg space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{className:"text-sm font-medium",children:"メールアドレス"}),(0,t.jsx)("p",{className:"font-mono text-sm mt-1",children:A.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{className:"text-sm font-medium",children:"パスワード"}),(0,t.jsx)("p",{className:"font-mono text-sm mt-1",children:A.password})]})]}),(0,t.jsx)(c.$,{onClick:z,className:"w-full bg-transparent",variant:"outline",children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"コピー完了"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"認証情報をコピー"]})}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"この認証情報を安全な方法でユーザーに共有してください。"})]}):(0,t.jsxs)("form",{onSubmit:D,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"email",children:"メールアドレス *"}),(0,t.jsx)(o.p,{id:"email",type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"admin@your-company.com",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"username",children:"ユーザー名 *"}),(0,t.jsx)(o.p,{id:"username",type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"ユーザー名を入力",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"password",children:"パスワード *"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.p,{id:"password",type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"パスワードを入力または生成",required:!0}),(0,t.jsx)(c.$,{type:"button",variant:"outline",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",s="";for(let a=0;a<12;a++)s+=e.charAt(Math.floor(Math.random()*e.length));w(s)},children:"生成"})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"role",children:"権限"}),(0,t.jsxs)(u.l6,{value:_,onValueChange:e=>C(e),children:[(0,t.jsx)(u.bq,{children:(0,t.jsx)(u.yv,{})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"viewer",children:"閲覧者 - データの閲覧のみ"}),(0,t.jsx)(u.eb,{value:"user",children:"一般ユーザー - データの編集可能"}),(0,t.jsx)(u.eb,{value:"admin",children:"管理者 - 全ての操作が可能"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(m.J,{htmlFor:"message",children:"メモ（任意）"}),(0,t.jsx)(h.T,{id:"message",value:k,onChange:e=>S(e.target.value),placeholder:"ユーザーに関するメモや追加情報",rows:3})]}),F&&(0,t.jsx)(f.$,{message:F})]}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(c.$,{type:"button",variant:"outline",onClick:()=>l(!1),children:"キャンセル"}),(0,t.jsxs)(c.$,{type:"submit",disabled:B,children:[B&&(0,t.jsx)(b.k,{className:"mr-2 h-4 w-4"}),"ユーザー作成"]})]})]}),A&&(0,t.jsx)(d.Es,{children:(0,t.jsx)(c.$,{onClick:()=>l(!1),children:"閉じる"})})]})]})}var N=a(8524),w=a(8145),_=a(88),C=a(7944),k=a(3999);function S(e){let{...s}=e;return(0,t.jsx)(C.bL,{"data-slot":"alert-dialog",...s})}function F(e){let{...s}=e;return(0,t.jsx)(C.ZL,{"data-slot":"alert-dialog-portal",...s})}function J(e){let{className:s,...a}=e;return(0,t.jsx)(C.hJ,{"data-slot":"alert-dialog-overlay",className:(0,k.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function A(e){let{className:s,...a}=e;return(0,t.jsxs)(F,{children:[(0,t.jsx)(J,{}),(0,t.jsx)(C.UC,{"data-slot":"alert-dialog-content",className:(0,k.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function E(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,k.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function $(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,k.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function T(e){let{className:s,...a}=e;return(0,t.jsx)(C.hE,{"data-slot":"alert-dialog-title",className:(0,k.cn)("text-lg font-semibold",s),...a})}function Z(e){let{className:s,...a}=e;return(0,t.jsx)(C.VY,{"data-slot":"alert-dialog-description",className:(0,k.cn)("text-muted-foreground text-sm",s),...a})}function B(e){let{className:s,...a}=e;return(0,t.jsx)(C.rc,{className:(0,k.cn)((0,c.r)(),s),...a})}function z(e){let{className:s,...a}=e;return(0,t.jsx)(C.ZD,{className:(0,k.cn)((0,c.r)({variant:"outline"}),s),...a})}function D(e){let{open:s,onOpenChange:a,title:l,description:n,confirmText:r="Confirm",cancelText:i="Cancel",onConfirm:c,variant:d="default"}=e;return(0,t.jsx)(S,{open:s,onOpenChange:a,children:(0,t.jsxs)(A,{children:[(0,t.jsxs)(E,{children:[(0,t.jsx)(T,{children:l}),(0,t.jsx)(Z,{children:n})]}),(0,t.jsxs)($,{children:[(0,t.jsx)(z,{children:i}),(0,t.jsx)(B,{onClick:c,className:"destructive"===d?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"",children:r})]})]})})}var O=a(3580);function R(e){let{users:s,onUserUpdated:a}=e,{updateUserRole:l,updateUserStatus:n,loading:r}=g(),[c,d]=(0,i.useState)(null),[o,m]=(0,i.useState)(null),{toast:h}=(0,O.dj)(),x=async(e,s)=>{try{await l(e,s),h({title:"成功",description:"ユーザー権限を更新しました"}),a&&a()}catch(e){h({title:"エラー",description:"権限の更新に失敗しました",variant:"destructive"})}},j=async(e,s)=>{d(e),m(s?"activate":"deactivate")},p=async()=>{if(c)try{let e=await n(c,"activate"===o);e.success?(h({title:"成功",description:e.message}),a&&a()):h({title:"エラー",description:e.message,variant:"destructive"})}catch(e){h({title:"エラー",description:"ユーザーの".concat("activate"===o?"有効化":"無効化","に失敗しました"),variant:"destructive"})}finally{d(null),m(null)}},v=e=>new Date(e).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(N.XI,{children:[(0,t.jsx)(N.A0,{children:(0,t.jsxs)(N.Hj,{children:[(0,t.jsx)(N.nd,{children:"ユーザー名"}),(0,t.jsx)(N.nd,{children:"メールアドレス"}),(0,t.jsx)(N.nd,{children:"権限"}),(0,t.jsx)(N.nd,{children:"ステータス"}),(0,t.jsx)(N.nd,{children:"最終ログイン"}),(0,t.jsx)(N.nd,{children:"作成日"}),(0,t.jsx)(N.nd,{className:"w-[70px]",children:"操作"})]})}),(0,t.jsx)(N.BF,{children:s.map(e=>(0,t.jsxs)(N.Hj,{children:[(0,t.jsx)(N.nA,{className:"font-medium",children:e.name}),(0,t.jsx)(N.nA,{children:e.email}),(0,t.jsx)(N.nA,{children:(0,t.jsxs)(u.l6,{value:e.role,onValueChange:s=>x(e.id,s),disabled:r,children:[(0,t.jsx)(u.bq,{className:"w-[140px]",children:(0,t.jsx)(u.yv,{})}),(0,t.jsxs)(u.gC,{children:[(0,t.jsx)(u.eb,{value:"viewer",children:"閲覧者"}),(0,t.jsx)(u.eb,{value:"user",children:"一般ユーザー"}),(0,t.jsx)(u.eb,{value:"admin",children:"管理者"})]})]})}),(0,t.jsx)(N.nA,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(_.d,{checked:e.is_active,onCheckedChange:()=>j(e.id,!e.is_active),disabled:r}),(0,t.jsx)("span",{className:"text-sm",children:e.is_active?"有効":"無効"})]})}),(0,t.jsx)(N.nA,{children:e.last_login?v(e.last_login):"未ログイン"}),(0,t.jsx)(N.nA,{children:v(e.created_at)}),(0,t.jsx)(N.nA,{children:(0,t.jsx)(w.E,{variant:e.is_active?"default":"outline",children:e.is_active?"アクティブ":"非アクティブ"})})]},e.id))})]}),(0,t.jsx)(D,{open:null!==c,onOpenChange:e=>!e&&d(null),title:"activate"===o?"ユーザー有効化の確認":"ユーザー無効化の確認",description:"activate"===o?"このユーザーを有効化しますか？有効化されたユーザーはシステムにログインできるようになります。":"このユーザーを無効化しますか？無効化されたユーザーはシステムにログインできなくなります。",onConfirm:p,confirmText:"activate"===o?"有効化":"無効化",cancelText:"キャンセル"})]})}var L=a(3227),q=a(4229),I=a(4416),U=a(98);let V={company_name:"",phone:"",email:"",website:"",address:"",postal_code:"",description:"",ceo_name:"",established_year:new Date().getFullYear(),employee_count:0};function M(e){let{onSave:s}=e,[a,l]=(0,i.useState)(V),[r,d]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),[j,p]=(0,i.useState)({});(0,i.useEffect)(()=>{v()},[]);let v=async()=>{d(!0);try{let e=localStorage.getItem("company_settings");if(e)l(JSON.parse(e));else try{let e=await U.uE.get("/settings/company");l(e)}catch(e){}}catch(e){(0,O.oR)({title:"設定の読み込みに失敗しました",description:"デフォルト設定を使用します",variant:"destructive"})}finally{d(!1)}},g=()=>{let e={};return a.company_name.trim()||(e.company_name="会社名は必須です"),a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&(e.email="無効なメール形式です"),a.website&&!/^https?:\/\/.+/.test(a.website)&&(e.website="ウェブサイトはhttp://またはhttps://で始まる必要があります"),a.phone&&!/^[\d\-\+\(\)\s]+$/.test(a.phone)&&(e.phone="無効な電話番号形式です"),a.postal_code&&!/^\d{3}-\d{4}$/.test(a.postal_code)&&(e.postal_code="郵便番号は000-0000の形式で入力してください"),(a.established_year<1800||a.established_year>new Date().getFullYear())&&(e.established_year="設立年は1800年から現在年までの範囲で入力してください"),a.employee_count<0&&(e.employee_count="従業員数は正の数である必要があります"),p(e),0===Object.keys(e).length},b=async e=>{if(e.preventDefault(),g()){x(!0);try{localStorage.setItem("company_settings",JSON.stringify(a));try{await U.uE.post("/settings/company",a)}catch(e){}s&&s(a),(0,O.oR)({title:"設定を保存しました",description:"会社情報が正常に保存されました"})}catch(e){(0,O.oR)({title:"保存に失敗しました",description:"設定の保存中にエラーが発生しました",variant:"destructive"})}finally{x(!1)}}},f=(e,s)=>{l(a=>({...a,[e]:s})),j[e]&&p(s=>({...s,[e]:""}))};return r?(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-5 w-5"}),"会社情報設定"]}),(0,t.jsx)(n.BT,{children:"システムで使用する会社情報を設定します"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,t.jsx)("span",{className:"ml-2",children:"設定を読み込み中..."})]})})]}):(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"h-5 w-5"}),"会社情報設定"]}),(0,t.jsx)(n.BT,{children:"システムで使用する会社情報を設定します"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("form",{onSubmit:b,noValidate:!0,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(m.J,{htmlFor:"company_name",children:"会社名 *"}),(0,t.jsx)(o.p,{id:"company_name",value:a.company_name,onChange:e=>f("company_name",e.target.value),disabled:u,className:j.company_name?"border-destructive":"",placeholder:"株式会社サンプル"}),j.company_name&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.company_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"ceo_name",children:"代表者名"}),(0,t.jsx)(o.p,{id:"ceo_name",value:a.ceo_name,onChange:e=>f("ceo_name",e.target.value),disabled:u,placeholder:"田中太郎"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"established_year",children:"設立年"}),(0,t.jsx)(o.p,{id:"established_year",type:"number",min:"1800",max:new Date().getFullYear(),value:a.established_year,onChange:e=>f("established_year",Number.parseInt(e.target.value)||0),disabled:u,className:j.established_year?"border-destructive":""}),j.established_year&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.established_year})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"employee_count",children:"従業員数"}),(0,t.jsx)(o.p,{id:"employee_count",type:"number",min:"0",value:a.employee_count,onChange:e=>f("employee_count",Number.parseInt(e.target.value)||0),disabled:u,className:j.employee_count?"border-destructive":""}),j.employee_count&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.employee_count})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"phone",children:"電話番号"}),(0,t.jsx)(o.p,{id:"phone",value:a.phone,onChange:e=>f("phone",e.target.value),disabled:u,className:j.phone?"border-destructive":"",placeholder:"03-1234-5678"}),j.phone&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.phone})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"email",children:"メールアドレス"}),(0,t.jsx)(o.p,{id:"email",type:"email",value:a.email,onChange:e=>f("email",e.target.value),disabled:u,className:j.email?"border-destructive":"",placeholder:"info@example.com"}),j.email&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"website",children:"ウェブサイト"}),(0,t.jsx)(o.p,{id:"website",type:"url",value:a.website,onChange:e=>f("website",e.target.value),disabled:u,className:j.website?"border-destructive":"",placeholder:"https://example.com"}),j.website&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.website})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m.J,{htmlFor:"postal_code",children:"郵便番号"}),(0,t.jsx)(o.p,{id:"postal_code",value:a.postal_code,onChange:e=>f("postal_code",e.target.value),disabled:u,className:j.postal_code?"border-destructive":"",placeholder:"123-4567"}),j.postal_code&&(0,t.jsx)("p",{className:"text-sm text-destructive mt-1",children:j.postal_code})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(m.J,{htmlFor:"address",children:"住所"}),(0,t.jsx)(o.p,{id:"address",value:a.address,onChange:e=>f("address",e.target.value),disabled:u,placeholder:"東京都渋谷区渋谷1-1-1 サンプルビル10F"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)(m.J,{htmlFor:"description",children:"会社概要"}),(0,t.jsx)(h.T,{id:"description",rows:4,value:a.description,onChange:e=>f("description",e.target.value),disabled:u,placeholder:"会社の事業内容や概要を記載してください"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-4 border-t",children:[(0,t.jsxs)(c.$,{type:"submit",disabled:u,children:[(0,t.jsx)(q.A,{className:"h-4 w-4 mr-2"}),u?"保存中...":"設定を保存"]}),(0,t.jsxs)(c.$,{type:"button",variant:"outline",onClick:()=>{l(V),p({}),(0,O.oR)({title:"設定をリセットしました",description:"フォームが初期状態に戻りました"})},disabled:u,children:[(0,t.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"リセット"]})]})]})})]})}var W=a(7580),X=a(5525),Y=a(381);function H(){let{users:e,loading:s,error:a,refetch:i}=g();return(0,t.jsx)(l.MainLayout,{children:(0,t.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"設定"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"システムの設定とユーザー管理を行います"})]})}),(0,t.jsxs)(r.tU,{defaultValue:"users",className:"space-y-4",children:[(0,t.jsxs)(r.j7,{children:[(0,t.jsxs)(r.Xi,{value:"users",children:[(0,t.jsx)(W.A,{className:"mr-2 h-4 w-4"}),"ユーザー管理"]}),(0,t.jsxs)(r.Xi,{value:"permissions",children:[(0,t.jsx)(X.A,{className:"mr-2 h-4 w-4"}),"権限設定"]}),(0,t.jsxs)(r.Xi,{value:"system",children:[(0,t.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),"システム設定"]})]}),(0,t.jsx)(r.av,{value:"users",className:"space-y-4",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.ZB,{children:"ユーザー管理"}),(0,t.jsx)(n.BT,{children:"システムユーザーの招待、権限変更、無効化を行います"})]}),(0,t.jsx)(y,{onUserCreated:i})]})}),(0,t.jsxs)(n.Wu,{children:[s&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(b.k,{className:"mr-2"}),"ユーザー一覧を読み込み中..."]}),a&&(0,t.jsx)(f.$,{message:a}),!s&&!a&&(0,t.jsx)(R,{users:e,onUserUpdated:i})]})]})}),(0,t.jsx)(r.av,{value:"permissions",className:"space-y-4",children:(0,t.jsxs)(n.Zp,{children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"権限設定"}),(0,t.jsx)(n.BT,{children:"各権限レベルの詳細設定を行います"})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-destructive",children:"管理者"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"全ての機能にアクセス可能。ユーザー管理、システム設定の変更が可能。"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"一般ユーザー"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"企業データの閲覧・編集、案件管理が可能。ユーザー管理は不可。"})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-muted-foreground",children:"閲覧者"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"データの閲覧のみ可能。編集・削除・作成は不可。"})]})]})})})]})}),(0,t.jsx)(r.av,{value:"system",className:"space-y-4",children:(0,t.jsx)(M,{})})]})]})})}},6961:(e,s,a)=>{Promise.resolve().then(a.bind(a,2468))},9474:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var t=a(5155);a(2115);var l=a(3999);function n(e){let{className:s,...a}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8823,7715,7501,2717,2286,85,3953,2245,5646,7869,5867,8441,1684,7358],()=>s(6961)),_N_E=e.O()}]);